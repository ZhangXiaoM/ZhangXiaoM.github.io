---
title: 并发编程
date: 2018-06-12 16:49:31
tags: 操作系统
---

## 一、进程

在计算机的世界中，CPU 是唯一的，内存是唯一的，磁盘是唯一的，大部分资源都是共享的，但是正在运行的应用程序不是唯一的，因此，不同的应用程序可能在不同的时刻使用 CPU、内存、磁盘等等，这样就会造成操作系统对硬件和软件的管理混乱。进程概念的引入很好的解决了这个问题，进程是对正在运行的应用程序的抽象，它使所有的应用程序都以为自己在独占的使用 CPU 和内存等等，由于这些抽象的存在，操作系统只需要关心如何正确的调度进程，而不用过多的关心每个进程的细节。

### 1、进程模型

每个进程都由完整的逻辑控制流和虚拟内存构成，逻辑控制流即为正在执行的指令集，虚拟内存同样也是一个抽象概念，他是物理内存和文件的抽象。我们可以拿面向对象的思想看待操作系统相对于进程，对对象来说，我们只需要关心它的部分信息和能力，而不在意它的实现细节。

进程有三种运行状态：阻塞、就绪、运行，三种状态的转换关系为：

![](https://upload-images.jianshu.io/upload_images/5314152-bedc9a2c44438ac7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

### 2、多进程模型

单核 CPU 在同一时刻只能运行一个进程，因此操作系统会通过进程调度程序实现进程的调度，即进程运行的先后顺序调度。操作系统会维持一张进程表来保存当前被阻塞的进程的一些信息，目的是为了当此进程重新被调度到运行态时，可以继续接着被阻塞时的状态运行，该进程表包含了进程运行的程序计数器、堆栈指针、内存分配状况、打开的文件状态、调度信息等。进程表的存在可以使操作系统完美的切换进程，操作系统通过不同的调度方式实现并发编程，如下：

![](https://upload-images.jianshu.io/upload_images/5314152-5608219e35413fa4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

如图 a 和图 b，进程通过这个方式让自己独占的使用程序计数器，如图 c，CPU 通过调度程序实现多进程的并发运行。