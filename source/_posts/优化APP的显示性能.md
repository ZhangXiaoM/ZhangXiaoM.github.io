---
title: 优化APP的显示性能
date: 2018-07-21 16:16:16
tags: 
---

APP 的显示性能问题一直以来都是一个经久不衰的话题，特别是滚动视图、表视图的滚动流畅性等等问题。那么从我们 `new` 一个 `UIKit` 开始到它在屏幕上显示这么一个过程，CPU 和 GPU 以及显示设备是如何协同工作的呢？APP 的显示性能、帧率到底应该从哪些方面入手去优化？还是说忽略理论分析，而强行优化性能？下面我们就来讨论一下这个问题。

### 一、几个概念

#### 1、像素和分辨率

像素，通俗的来讲就是构成图像的最小单位，APP 的显示界面就是由像素组成，每个像素都会携带一个由 RGB 三原色组成的颜色信息，一个界面所有的像素和其携带的颜色信息组成我们肉眼看到的多彩的界面。分辨率就是一个界面可以显示的像素数，比如 iPhone 6 的分辨率为 750x1334，即单个 iPhone 6 界面可以显示 750x1334 个像素。分辨率的大小决定了画面的精细程度。比如：

![](http://i1.hdslb.com/bfs/archive/aafcde785dc26db2a710c2faa133b7a9bd35015e.jpg)

左侧的图片甚至可以看到一个一个的小格子（像素）。

#### 2、位图

[位图](https://zh.wikipedia.org/wiki/%E4%BD%8D%E5%9B%BE)，在计算机术语中，它是一种数据结构，我们也可以理解为，一张由二进制表示的图像，它也是由若干个点组成，每个点会携带一个表示 RGB 三原色的数值，比如 `0xffffff` 等。

#### 3、FPS（Frame per second，帧率）

在计算机图形学、视频、动画、游戏都领域都有帧率的影子，[这个视频](https://www.bilibili.com/video/av15263885?spm_id_from=333.338.__bofqi.25)可以帮助我们很好的理解这个概念，当我们在 APP 上滚动视图时，滚动动画其实就是一帧一帧的图像组成的，只不过 CPU 让它滚动的频率过快，才形成了动画，其实视频、动画、游戏等都是相同的原理。iOS 设备的帧率是 60，也就是 CPU 会每秒刷新 60 次界面，如果不够这个数，就会丢帧，丢帧的直观感受就是小时候看 CD 机时，我们叫丢帧为卡碟，这也是界面不流畅或者卡顿的根源。

#### 4、CALayer 和 UIView



### 二、CPU 和 GPU 协同工作























